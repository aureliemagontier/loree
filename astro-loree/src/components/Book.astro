---
---

<div class="book-container">
    <div id="book">
        <slot />
    </div>
</div>

<script>
    import { PageFlip } from 'page-flip';

    document.addEventListener('DOMContentLoaded', () => {
        const bookEl = document.getElementById('book');
        if (!bookEl) return;

        const isMobile = window.innerWidth < 768;
        const initialHeight = isMobile ? 800 : 500;

        const pageFlip = new PageFlip(bookEl, {
            width: 550, 
            height: initialHeight,
            size: 'stretch',
            minWidth: 315,
            maxWidth: 1000,
            minHeight: 420,
            maxHeight: isMobile ? 1200 : 600,
            maxShadowOpacity: 0.5,
            showCover: true,
            mobileScrollSupport: true 
        });

        const pages = document.querySelectorAll('.page');
        pageFlip.loadFromHTML(pages);

        // Expose pageFlip instance for navigation controls
        window.pageFlip = pageFlip;
    });
</script>

<style>
    .book-container {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        background-color: #f5f5f5; /* Background behind the book */
        overflow: hidden;
    }

    /* Pages will be styled by the library, but we can add default styles here */
</style>
